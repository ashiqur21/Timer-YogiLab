<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Flip Countdown Timer</title>
  </head>
  <body>
    <div class="timer">
      <div class="section">
        <div class="digits" id="days"></div>
        <div class="label">Days</div>
      </div>
      <div class="section">
        <div class="digits" id="hours"></div>
        <div class="label">Hours</div>
      </div>
      <div class="section">
        <div class="digits" id="minutes"></div>
        <div class="label">Mins</div>
      </div>
      <div class="section">
        <div class="digits" id="seconds"></div>
        <div class="label">Secs</div>
      </div>
    </div>

    <script>
      const targetDate = new Date();
      targetDate.setSeconds(targetDate.getSeconds() + 1936966); // 22d 8h 32m 46s

      const sections = ["days", "hours", "minutes", "seconds"];
      const previousValues = { days: "", hours: "", minutes: "", seconds: "" };

      function createDigitElement(value) {
        const wrapper = document.createElement("div");
        wrapper.className = "flip-card";
        wrapper.innerHTML = `
        <div class="card">
          <div class="number">${value}</div>
        </div>
        `;
        return wrapper;
      }

      function updateDigits(id, value) {
        const padded = value.toString().padStart(2, "0");
        const container = document.getElementById(id);
        const prev = previousValues[id];

        container.innerHTML = "";
        padded.split("").forEach((digit, i) => {
          const digitEl = createDigitElement(digit);

          if (!prev || prev[i] !== digit) {
            setTimeout(() => {
              digitEl.querySelector(".card").classList.add("flip");
            }, 20);
          }

          container.appendChild(digitEl);
        });

        previousValues[id] = padded;
      }

      function updateTimer() {
        const now = new Date();
        const diff = Math.max(0, targetDate - now);

        const totalSeconds = Math.floor(diff / 1000);
        const days = Math.floor(totalSeconds / (3600 * 24));
        const hours = Math.floor((totalSeconds % (3600 * 24)) / 3600);
        const minutes = Math.floor((totalSeconds % 3600) / 60);
        const seconds = totalSeconds % 60;

        updateDigits("days", days);
        updateDigits("hours", hours);
        updateDigits("minutes", minutes);
        updateDigits("seconds", seconds);
      }

      updateTimer();
      setInterval(updateTimer, 1000);
    </script>
  </body>
</html>
